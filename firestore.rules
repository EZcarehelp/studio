
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Allow public read access to user profiles.
    // This is needed for features like "Find Doctors" and public profile pages.
    // `get` allows reading single documents.
    // `list` allows querying the collection.
    match /users/{userId} {
      allow get: if true;
      allow write: if request.auth != null && request.auth.uid == userId;
    }

    // Explicitly allow querying the 'users' collection for everyone.
    match /users/{document=**} {
      allow list: if true;
    }

    // Default deny all other collections.
    match /{path=**}/documents/{document} {
        allow read, write: if false;
    }
  }
}
